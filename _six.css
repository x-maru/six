  /* stray global white-space removed */
  html {
    font-size: 18px;
  }
  html, body {
    height: 100%;
    margin: 0;
    background: #1e1f22;
    color: #ddd;
    font-family: "Cascadia Code", "Consolas", "游ゴシック Light", "Yu Gothic", "Meiryo", "MS Gothic", monospace;
    overflow: hidden; /* 外側の縦スクロールを抑止 */
  }
  #pane { display: flex; height: 100%; overflow: visible; }
  /* 本文ストライプ（偶数行デバッグ用オーバーレイ） */
  #edstripe {
    position: absolute; top: 0; bottom: 0; left: 0; right: 0;
    pointer-events: none; z-index: 0; /* editor(=1) の下, gutter(z=2) の下 */
    background-repeat: repeat;
  }
  /* 行番号ガター */
  #gutter {
    position: static;
    width: 4.0rem; background: #1b1c1f; border-right: 1px solid #3b3d42;
    color: #c0c0c0; text-align: right; /* padding-right を各行要素に移動 */ box-sizing: border-box;
    font-size: 1.0rem; line-height: 1.6; pointer-events: none; overflow: hidden;
    z-index: 2;
    height: 100%;
  }
  #gutter .ln { height: auto; }
  /* 本文 (#editor) 初期版は absolute + padding-left でガターと重複していたため削除・統合 */
  /* コマンドバー（:） */
  #cmdbar {
    position: absolute; left: 0; right: 0; bottom: 0;
    height: 3.6rem;
    background: #222; color: #fff;
    border-top: 1px solid #3b3d42; font-size: 0.78rem;
  display: flex; flex-direction: column; z-index: 50;
  }
  #statusline1 {
    display: flex;
    align-items: center;
    width: 100%;
    height: 28px;
    overflow: hidden;
  }
  #filename, #modmark, #mode, #pos {
    flex: 0 0 auto;
    min-width: 80px;
    max-width: 320px; /* ファイル名の見切れを緩和 */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  /* ファイル名は余裕があればもう少し広がれるように */
  #filename { max-width: 40%; }
  /* pos は桁数が増えるので広がれるようにする */
  #pos { flex: 1 1 auto; min-width: 140px; max-width: none; text-align: right; }
  #hint {
    flex: 1 1 auto;
    text-align: center;
    min-width: 120px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  #cmdprefix, #cmdline {
    position: static;
    font-size: 0.78rem;
    height: 1.55rem;
    margin: 0;
    background: #232323;
    color: #fff;
    border: none;
    box-sizing: border-box;
    display: inline-block;
    vertical-align: middle;
  }
  #cmdline {
    width: calc(100% - 1.8rem);
    padding: 0.22rem 0.66rem;
    border: 1px solid #3b3d42;
    color: #fff;
    background: #232323;
    outline: none;
    font-family: inherit;
    margin-left: 0;
    margin-right: 0;
    display: none;
    height: 1.55rem;
  }
  #cmdmsg {
    display: none;
    position: absolute;
    left: 0; top: 0; width: 100%; height: 100%;
    background: #232323; color: #ffd;
    font-size: 0.78rem;
    padding: 0.22rem 0.66rem;
    box-sizing: border-box;
    border-radius: 0.22rem;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    z-index: 12;
    height: 1.55rem;
  }
  /* ヘルプオーバーレイ */
  #help {
    position: absolute; left: 5%; right: 5%; top: 8%; bottom: 8%;
    border: 0.055rem solid #3b3d42; background: rgba(30,31,34,0.98);
    display: none; z-index: 4; box-shadow: 0 0.44rem 1.33rem rgba(0,0,0,.4);
    padding: 0.88rem; overflow: hidden; font-size: 0.9rem; line-height: 1.6; /* ← overflow を hidden に */
  }
  /* スクロールコンテナ（キー操作 j/k/gg/G 用）: 親を overflow:hidden のまま内部のみスクロール可能にする */
  #helpScroll {
    overflow-y: auto;
    height: calc(100% - 2.2rem); /* フッタ分を差し引き */
    box-sizing: border-box;
    padding-right: 0.4rem; /* クリップされる末尾文字余裕 */
  }
  #helpFooter { height: 2.2rem; box-sizing: border-box; }
  #help h2 { margin: 0 0 0.44rem; font-size: 0.89rem; }
  #editor {
    position: static;
    box-sizing: border-box;
    padding: 0.55rem 0.55rem 0.55rem 0.5rem; /* 左 0.5rem 視認性余白 */
    background: transparent;
    color: rgb(0,15,0);
    outline: none;
    resize: none; /* ウインドウリサイズで追従させるので手動 resizing は無効化 */
    font-size: 1.0rem;
    line-height: 1.6;
    caret-color: red;
    z-index: 1;
    width: 100%;
    min-width: 0;
    height: 100%;
    overflow-x: auto; /* wrap=off 時に長い行で水平スクロール */
    overflow-y: auto;
    flex: 1 1 auto;
  }
  #helpFooter { display:flex; align-items:center; justify-content:space-between; padding:0 0.4rem; }
  #helpKeys { color: #bbb; font-size: 0.83rem; line-height: 1.77rem; margin-right:0.66rem; }
  #helpFooter button { margin-left:auto; }
  #helpScroll:focus { outline:none; }
  /* ちょいメッセージ（右下トースト） */
  #msg {
    position: absolute; left: 50%; bottom: 0.66rem; transform: translateX(-50%); z-index: 60;
    background: #2b2d31; border: 1px solid #3b3d42; color: #ddd;
    padding: 0.33rem 0.55rem; border-radius: 0.22rem; font-size: 0.67rem; display: none;
    pointer-events: none;
  }
  /* ステータスバー */
  #statusbar {
    position: absolute; left: 0; right: 0; bottom: 0;
    height: 1.55rem; background: #222; color: #fff;
    border-top: 1px solid #3b3d42; font-size: 0.78rem;
    display: flex; align-items: center; padding-left: 0.66rem; z-index: 10;
  }
  #statusline2 {
    width: 100%;
    height: 1.55rem;
    border-top: 0.11rem solid #555;
    background: #232323;
    position: relative;
  z-index: 51;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  /* 右下リサイズハンドル（IE9でもドラッグで window.resizeBy） */
  #winresizer{ position:absolute; right:6px; bottom:34px; width:14px; height:14px; cursor:se-resize; z-index:50; }
  #winresizer:before{ content:''; position:absolute; right:0; bottom:0; width:0; height:0;
    border-right:14px solid #666; border-top:14px solid transparent; opacity:.5; }
  #winresizer:hover:before{ border-right-color:#aaa; opacity:.8; }
